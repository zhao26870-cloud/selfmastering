<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goal Setting | SelfMaster</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
    <div class="container header-content">
        <div class="logo">
            <i class="fas fa-brain"></i>
            <span><a href="index.html" style="color: inherit; text-decoration: none;">SelfMaster</a></span>
        </div>
        <nav id="main-nav">
            <ul>
                <li><a href="tasks.html"><i class="fas fa-tasks"></i> Tasks</a></li>
                <li><a href="projects.html"><i class="fas fa-project-diagram"></i> Projects</a></li>
                <li><a href="calendar.html"><i class="fas fa-calendar"></i> Calendar</a></li>
                <li><a href="goals.html"><i class="fas fa-bullseye"></i> Goals</a></li>
                <li><a href="habits.html"><i class="fas fa-running"></i> Habits</a></li>
                <li><a href="notes.html"><i class="fas fa-sticky-note"></i> Notes</a></li>
                <li><a href="reviews.html"><i class="fas fa-chart-bar"></i> Reviews</a></li>
                <li><a href="analytics.html"><i class="fas fa-chart-line"></i> Analytics</a></li>
            </ul>
        </nav>
        <button class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</header>
    
    <section class="page-header">
        <div class="container">
            <h1><i class="fas fa-bullseye"></i> Goal Setting</h1>
            <p>Set SMART goals, track progress, and achieve your aspirations</p>
        </div>
    </section>
    
    <section class="goal-manager">
        <div class="container">
            <!-- Add goal form -->
            <div class="form-container" id="goal-form-container">
                <h3><i class="fas fa-plus-circle"></i> Set New Goal</h3>
                <form id="goal-form" onsubmit="createGoal(event)">
                    <div class="form-group">
                        <label for="goal-title">Goal Title *</label>
                        <input type="text" id="goal-title" placeholder="What do you want to achieve?" required>
                    </div>
                    <div class="form-group">
                        <label for="goal-description">Description</label>
                        <textarea id="goal-description" rows="3" placeholder="Describe your goal..."></textarea>
                    </div>
                    
                    <div class="smart-section">
                        <h4><i class="fas fa-bullseye"></i> SMART Criteria</h4>
                        <div class="smart-grid">
                            <div class="smart-card">
                                <label for="goal-specific">Specific *</label>
                                <textarea id="goal-specific" rows="2" placeholder="What exactly do you want to accomplish?" required></textarea>
                            </div>
                            <div class="smart-card">
                                <label for="goal-measurable">Measurable *</label>
                                <textarea id="goal-measurable" rows="2" placeholder="How will you measure success?" required></textarea>
                            </div>
                            <div class="smart-card">
                                <label for="goal-achievable">Achievable *</label>
                                <textarea id="goal-achievable" rows="2" placeholder="Is this realistic and attainable?" required></textarea>
                            </div>
                            <div class="smart-card">
                                <label for="goal-relevant">Relevant *</label>
                                <textarea id="goal-relevant" rows="2" placeholder="Why is this goal important to you?" required></textarea>
                            </div>
                            <div class="smart-card">
                                <label for="goal-timebound">Time-bound *</label>
                                <textarea id="goal-timebound" rows="2" placeholder="What's the deadline?" required></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="goal-category">Category</label>
                            <select id="goal-category">
                                <option value="learning">Learning</option>
                                <option value="fitness">Fitness</option>
                                <option value="career">Career</option>
                                <option value="personal">Personal</option>
                                <option value="financial">Financial</option>
                                <option value="health">Health</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="goal-priority">Priority</label>
                            <select id="goal-priority">
                                <option value="high">High</option>
                                <option value="medium" selected>Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="goal-start">Start Date</label>
                            <input type="date" id="goal-start">
                        </div>
                        <div class="form-group">
                            <label for="goal-deadline">Deadline</label>
                            <input type="date" id="goal-deadline">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Initial Progress (%)</label>
                        <input type="range" id="goal-progress" min="0" max="100" value="0" oninput="updateProgressValue()">
                        <span id="progress-value">0%</span>
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-plus"></i> Create Goal
                    </button>
                </form>
            </div>
            
            <!-- Goal cards with progress tracking -->
            <div class="goal-grid" id="goal-grid">
                <!-- Goal cards will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Goal Statistics -->
    <section class="goal-statistics">
        <div class="container">
            <h2 class="section-title"><i class="fas fa-chart-pie"></i> Goal Statistics</h2>
            <div class="stats-grid">
                <div class="stats-card">
                    <div class="stat-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-goals">0</div>
                        <div class="stat-label">Total Goals</div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="completed-goals">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="on-track-goals">0</div>
                        <div class="stat-label">On Track</div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="behind-goals">0</div>
                        <div class="stat-label">Behind</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>SelfMaster</h4>
                    <p>Your comprehensive personal management system designed to help you take control of your life, build better habits, and achieve your goals.</p>
                </div>
                <div class="footer-column">
                    <h4>Goal Features</h4>
                    <ul>
                        <li><a href="#">SMART Goal Framework</a></li>
                        <li><a href="#">Progress Tracking</a></li>
                        <li><a href="#">Milestone Management</a></li>
                        <li><a href="#">Goal Review</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Goal Types</h4>
                    <ul>
                        <li><a href="#">Short-term Goals</a></li>
                        <li><a href="#">Long-term Goals</a></li>
                        <li><a href="#">Learning Goals</a></li>
                        <li><a href="#">Personal Development</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 SelfMaster. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Goal page specific functionality
        function updateProgressValue() {
            const progress = document.getElementById('goal-progress').value;
            document.getElementById('progress-value').textContent = progress + '%';
        }
        
        function createGoal(event) {
            event.preventDefault();
            
            const goal = {
                id: Date.now(),
                title: document.getElementById('goal-title').value,
                description: document.getElementById('goal-description').value,
                smart: {
                    specific: document.getElementById('goal-specific').value,
                    measurable: document.getElementById('goal-measurable').value,
                    achievable: document.getElementById('goal-achievable').value,
                    relevant: document.getElementById('goal-relevant').value,
                    timebound: document.getElementById('goal-timebound').value
                },
                category: document.getElementById('goal-category').value,
                priority: document.getElementById('goal-priority').value,
                startDate: document.getElementById('goal-start').value,
                deadline: document.getElementById('goal-deadline').value,
                progress: parseInt(document.getElementById('goal-progress').value),
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                milestones: []
            };
            
            // Save to localStorage
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            goals.push(goal);
            localStorage.setItem('goals', JSON.stringify(goals));
            
            // Reset form
            document.getElementById('goal-form').reset();
            document.getElementById('progress-value').textContent = '0%';
            
            // Reload goals
            loadGoals();
            updateGoalStatistics();
            
            // Show success message
            alert('Goal created successfully!');
        }
        
        function loadGoals() {
            const goals = JSON.parse(localStorage.getItem('goals') || []);
            const goalGrid = document.getElementById('goal-grid');
            
            if (goals.length === 0) {
                goalGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bullseye fa-3x"></i>
                        <h3>No goals yet</h3>
                        <p>Create your first goal using the form above!</p>
                    </div>
                `;
                return;
            }
            
            goalGrid.innerHTML = goals.map(goal => `
                <div class="goal-card" data-goal-id="${goal.id}">
                    <div class="goal-header">
                        <h3>${goal.title}</h3>
                        <span class="goal-priority priority-${goal.priority}">${goal.priority}</span>
                    </div>
                    <p class="goal-description">${goal.description || 'No description'}</p>
                    
                    <div class="smart-preview">
                        <div class="smart-item">
                            <strong>S:</strong> ${goal.smart.specific.substring(0, 50)}...
                        </div>
                    </div>
                    
                    <div class="goal-progress">
                        <div class="progress-bar">
                            <div class="progress" style="width: ${goal.progress}%"></div>
                        </div>
                        <span class="progress-text">${goal.progress}%</span>
                    </div>
                    
                    <div class="goal-dates">
                        <span><i class="fas fa-calendar"></i> ${goal.deadline ? formatDate(goal.deadline) : 'No deadline'}</span>
                        <span><i class="fas fa-tag"></i> ${goal.category}</span>
                    </div>
                    
                    <div class="goal-actions">
                        <button class="btn-small" onclick="editGoal(${goal.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn-small" onclick="updateGoalProgress(${goal.id})">
                            <i class="fas fa-chart-line"></i> Update
                        </button>
                        <button class="btn-small btn-outline" onclick="deleteGoal(${goal.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function updateGoalProgress(goalId) {
            const newProgress = prompt('Enter new progress percentage (0-100):');
            if (newProgress !== null) {
                const progress = parseInt(newProgress);
                if (!isNaN(progress) && progress >= 0 && progress <= 100) {
                    const goals = JSON.parse(localStorage.getItem('goals') || '[]');
                    const goalIndex = goals.findIndex(g => g.id === goalId);
                    
                    if (goalIndex !== -1) {
                        goals[goalIndex].progress = progress;
                        goals[goalIndex].updatedAt = new Date().toISOString();
                        localStorage.setItem('goals', JSON.stringify(goals));
                        loadGoals();
                        updateGoalStatistics();
                        alert('Progress updated successfully!');
                    }
                } else {
                    alert('Please enter a valid number between 0 and 100');
                }
            }
        }
        
        function editGoal(goalId) {
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            const goal = goals.find(g => g.id === goalId);
            
            if (goal) {
                // Populate form with goal data
                document.getElementById('goal-title').value = goal.title;
                document.getElementById('goal-description').value = goal.description || '';
                document.getElementById('goal-specific').value = goal.smart.specific;
                document.getElementById('goal-measurable').value = goal.smart.measurable;
                document.getElementById('goal-achievable').value = goal.smart.achievable;
                document.getElementById('goal-relevant').value = goal.smart.relevant;
                document.getElementById('goal-timebound').value = goal.smart.timebound;
                document.getElementById('goal-category').value = goal.category;
                document.getElementById('goal-priority').value = goal.priority;
                document.getElementById('goal-start').value = goal.startDate || '';
                document.getElementById('goal-deadline').value = goal.deadline || '';
                document.getElementById('goal-progress').value = goal.progress;
                document.getElementById('progress-value').textContent = goal.progress + '%';
                
                // Scroll to form
                document.getElementById('goal-form-container').scrollIntoView({ behavior: 'smooth' });
                
                // Update form to edit mode
                const form = document.getElementById('goal-form');
                form.onsubmit = function(e) {
                    e.preventDefault();
                    updateGoal(goalId);
                };
                
                // Change button text
                const submitBtn = form.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<i class="fas fa-save"></i> Update Goal';
            }
        }
        
        function updateGoal(goalId) {
            const goals = JSON.parse(localStorage.getItem('goals') || '[]');
            const goalIndex = goals.findIndex(g => g.id === goalId);
            
            if (goalIndex !== -1) {
                goals[goalIndex] = {
                    ...goals[goalIndex],
                    title: document.getElementById('goal-title').value,
                    description: document.getElementById('goal-description').value,
                    smart: {
                        specific: document.getElementById('goal-specific').value,
                        measurable: document.getElementById('goal-measurable').value,
                        achievable: document.getElementById('goal-achievable').value,
                        relevant: document.getElementById('goal-relevant').value,
                        timebound: document.getElementById('goal-timebound').value
                    },
                    category: document.getElementById('goal-category').value,
                    priority: document.getElementById('goal-priority').value,
                    startDate: document.getElementById('goal-start').value,
                    deadline: document.getElementById('goal-deadline').value,
                    progress: parseInt(document.getElementById('goal-progress').value),
                    updatedAt: new Date().toISOString()
                };
                
                localStorage.setItem('goals', JSON.stringify(goals));
                
                // Reset form
                document.getElementById('goal-form').reset();
                document.getElementById('progress-value').textContent = '0%';
                
                // Restore original form behavior
                const form = document.getElementById('goal-form');
                form.onsubmit = function(e) {
                    e.preventDefault();
                    createGoal(e);
                };
                
                // Restore button text
                const submitBtn = form.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<i class="fas fa-plus"></i> Create Goal';
                
                // Reload goals
                loadGoals();
                updateGoalStatistics();
                
                alert('Goal updated successfully!');
            }
        }
        
        function deleteGoal(goalId) {
            if (confirm('Are you sure you want to delete this goal?')) {
                const goals = JSON.parse(localStorage.getItem('goals') || '[]');
                const updatedGoals = goals.filter(g => g.id !== goalId);
                localStorage.setItem('goals', JSON.stringify(updatedGoals));
                loadGoals();
                updateGoalStatistics();
                alert('Goal deleted successfully!');
            }
        }
        
        function updateGoalStatistics() {
            const goals = JSON.parse(localStorage.getItem('goals') || []);
            const totalGoals = goals.length;
            const completedGoals = goals.filter(g => g.progress === 100).length;
            const onTrackGoals = goals.filter(g => {
                if (!g.deadline) return false;
                const today = new Date();
                const deadline = new Date(g.deadline);
                const daysLeft = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));
                const progressPerDay = 100 / Math.max(daysLeft, 1);
                const expectedProgress = Math.min(100, progressPerDay * daysLeft);
                return g.progress >= expectedProgress * 0.8;
            }).length;
            const behindGoals = goals.filter(g => {
                if (!g.deadline) return false;
                const today = new Date();
                const deadline = new Date(g.deadline);
                const daysLeft = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));
                const progressPerDay = 100 / Math.max(daysLeft, 1);
                const expectedProgress = Math.min(100, progressPerDay * daysLeft);
                return g.progress < expectedProgress * 0.5;
            }).length;
            
            document.getElementById('total-goals').textContent = totalGoals;
            document.getElementById('completed-goals').textContent = completedGoals;
            document.getElementById('on-track-goals').textContent = onTrackGoals;
            document.getElementById('behind-goals').textContent = behindGoals;
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'No date';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize sample data if needed
            if (typeof SelfMasterData !== 'undefined') {
                SelfMasterData.initializeSampleData();
            }
            
            loadGoals();
            updateGoalStatistics();
            
            // Mobile menu
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const nav = document.querySelector('nav ul');
            
            if (mobileMenuBtn && nav) {
                mobileMenuBtn.addEventListener('click', function() {
                    nav.classList.toggle('show');
                    mobileMenuBtn.innerHTML = nav.classList.contains('show') 
                        ? '<i class="fas fa-times"></i>' 
                        : '<i class="fas fa-bars"></i>';
                });
            }
        });
    </script>
    
    <style>
        /* Additional styles for goals page */
        .smart-section {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9ff;
            border-radius: var(--border-radius);
        }
        
        .smart-section h4 {
            margin-bottom: 1rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .smart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .smart-card {
            background: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            border-left: 3px solid var(--primary);
        }
        
        .smart-card label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
            color: var(--dark);
        }
        
        .smart-card textarea {
            width: 100%;
            min-height: 60px;
            padding: 0.5rem;
            border: 1px solid var(--gray-light);
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .goal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .goal-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }
        
        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .goal-header h3 {
            margin: 0;
            flex: 1;
        }
        
        .goal-priority {
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .priority-high {
            background-color: rgba(249, 65, 68, 0.1);
            color: var(--danger);
        }
        
        .priority-medium {
            background-color: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }
        
        .priority-low {
            background-color: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }
        
        .goal-description {
            color: var(--gray);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .smart-preview {
            margin: 1rem 0;
            padding: 0.8rem;
            background: #f8f9ff;
            border-radius: 5px;
            font-size: 0.85rem;
        }
        
        .goal-progress {
            margin: 1rem 0;
        }
        
        .progress-bar {
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-bar .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .goal-dates {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--gray);
            margin: 1rem 0;
        }
        
        .goal-dates span {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .goal-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .btn-small {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }
        
        .goal-statistics {
            margin-top: 3rem;
            padding: 2rem 0;
            background: #f8f9ff;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .stats-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .stat-content {
            flex: 1;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
            grid-column: 1 / -1;
        }
        
        .empty-state i {
            margin-bottom: 1rem;
            color: var(--primary-light);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary);
        }
        
        @media (max-width: 768px) {
            .smart-grid {
                grid-template-columns: 1fr;
            }
            
            .goal-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .goal-dates {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</body>
</html>