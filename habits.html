<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker | SelfMaster</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
    <div class="container header-content">
        <div class="logo">
            <i class="fas fa-brain"></i>
            <span><a href="index.html" style="color: inherit; text-decoration: none;">SelfMaster</a></span>
        </div>
        <nav id="main-nav">
            <ul>
                <li><a href="tasks.html"><i class="fas fa-tasks"></i> Tasks</a></li>
                <li><a href="projects.html"><i class="fas fa-project-diagram"></i> Projects</a></li>
                <li><a href="calendar.html"><i class="fas fa-calendar"></i> Calendar</a></li>
                <li><a href="goals.html"><i class="fas fa-bullseye"></i> Goals</a></li>
                <li><a href="habits.html"><i class="fas fa-running"></i> Habits</a></li>
                <li><a href="notes.html"><i class="fas fa-sticky-note"></i> Notes</a></li>
                <li><a href="reviews.html"><i class="fas fa-chart-bar"></i> Reviews</a></li>
                <li><a href="analytics.html"><i class="fas fa-chart-line"></i> Analytics</a></li>
            </ul>
        </nav>
        <button class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</header>
    
    <section class="page-header">
        <div class="container">
            <h1><i class="fas fa-running"></i> Habit Tracker</h1>
            <p>Build positive routines and break bad habits with consistent tracking</p>
        </div>
    </section>
    
    <section class="habit-tracker">
        <div class="container">
            <!-- Add habit form -->
            <div class="form-container">
                <h3><i class="fas fa-plus-circle"></i> Add New Habit</h3>
                <form id="habit-form" onsubmit="createHabit(event)">
                    <div class="form-group">
                        <label for="habit-name">Habit Name *</label>
                        <input type="text" id="habit-name" placeholder="e.g., Morning Meditation" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="habit-description">Description</label>
                        <textarea id="habit-description" rows="2" placeholder="Describe your habit..."></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="habit-category">Category</label>
                            <select id="habit-category">
                                <option value="wellness">Wellness</option>
                                <option value="productivity">Productivity</option>
                                <option value="learning">Learning</option>
                                <option value="personal">Personal</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="habit-frequency">Frequency</label>
                            <select id="habit-frequency">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="habit-time">Best Time</label>
                            <select id="habit-time">
                                <option value="morning">Morning</option>
                                <option value="afternoon">Afternoon</option>
                                <option value="evening">Evening</option>
                                <option value="anytime">Anytime</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="habit-reminder">Reminder Time</label>
                            <input type="time" id="habit-reminder">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-plus"></i> Add Habit
                    </button>
                </form>
            </div>
            
            <!-- Habit list with calendars -->
            <div class="habit-grid" id="habit-grid">
                <!-- Habit cards will be loaded here -->
            </div>
            <br>
            <!-- Habit statistics -->
            <div class="stats-card">
                <h3><i class="fas fa-chart-line"></i> Habit Analytics</h3>
                <div class="habit-stats" id="habit-stats">
                    <!-- Statistics will be loaded here -->
                </div>
            </div>
        </div>
    </section>
<br>
    <!-- Habit Tips -->
    <section class="habit-tips">
        <div class="container">
            <h2 class="section-title"><i class="fas fa-lightbulb"></i> Habit Building Tips</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h4>Start Small</h4>
                    <p>Begin with 2-3 minute versions of your habits to build consistency.</p>
                </div>
                
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-anchor"></i>
                    </div>
                    <h4>Habit Stacking</h4>
                    <p>Attach new habits to existing routines for better adherence.</p>
                </div>
                
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h4>Track Progress</h4>
                    <p>Visual tracking increases motivation and helps maintain streaks.</p>
                </div>
                
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h4>Accountability</h4>
                    <p>Share your goals with friends or join a habit-tracking community.</p>
                </div>
            </div>
        </div>
    </section>
<br>
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>SelfMaster</h4>
                    <p>Your comprehensive personal management system designed to help you take control of your life, build better habits, and achieve your goals.</p>
                </div>
                <div class="footer-column">
                    <h4>Habit Features</h4>
                    <ul>
                        <li><a href="#">Daily Tracking</a></li>
                        <li><a href="#">Streak Counter</a></li>
                        <li><a href="#">Progress Charts</a></li>
                        <li><a href="#">Reminder System</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Popular Habits</h4>
                    <ul>
                        <li><a href="#">Meditation</a></li>
                        <li><a href="#">Exercise</a></li>
                        <li><a href="#">Reading</a></li>
                        <li><a href="#">Journaling</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 SelfMaster. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <script src="script.js"></script>
    <script>
        // Habits page specific functionality
        function createHabit(event) {
            event.preventDefault();
            
            const habit = {
                id: Date.now(),
                name: document.getElementById('habit-name').value,
                description: document.getElementById('habit-description').value,
                category: document.getElementById('habit-category').value,
                frequency: document.getElementById('habit-frequency').value,
                timeOfDay: document.getElementById('habit-time').value,
                reminder: document.getElementById('habit-reminder').value,
                streak: 0,
                bestStreak: 0,
                calendar: Array(30).fill(false), // Last 30 days
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
         
            // Save to localStorage
            const habits = JSON.parse(localStorage.getItem('habits') || '[]');
            habits.push(habit);
            localStorage.setItem('habits', JSON.stringify(habits));
            
            // Reset form
            document.getElementById('habit-form').reset();
            
            // Reload habits
            loadHabits();
            updateHabitStatistics();
            
            // Show success message
            alert('Habit created successfully!');
        }
        
        function loadHabits() {
            const habits = JSON.parse(localStorage.getItem('habits') || '[]');
            const habitGrid = document.getElementById('habit-grid');
            
            if (habits.length === 0) {
                habitGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-running fa-3x"></i>
                        <h3>No habits yet</h3>
                        <p>Create your first habit using the form above!</p>
                    </div>
                `;
                return;
            }
            
            habitGrid.innerHTML = habits.map(habit => `
                <div class="habit-card" data-habit-id="${habit.id}">
                    <div class="habit-header">
                        <h3>${habit.name}</h3>
                        <div class="habit-streak">
                            <i class="fas fa-fire"></i>
                            <span>${habit.streak || 0} days</span>
                        </div>
                    </div>
                    
                    <p class="habit-description">${habit.description || 'No description'}</p>
                    
                    <div class="habit-info">
                        <span class="habit-category">${habit.category}</span>
                        <span class="habit-frequency">${habit.frequency}</span>
                        <span class="habit-time">${habit.timeOfDay}</span>
                    </div>
                    
                    <div class="habit-calendar" id="calendar-${habit.id}">
                        ${generateCalendar(habit.calendar)}
                    </div>
                    
                    <div class="habit-actions">
                        <button class="btn-small" onclick="logHabit(${habit.id})">
                            <i class="fas fa-check"></i> Log Today
                        </button>
                        <button class="btn-small" onclick="editHabit(${habit.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn-small btn-outline" onclick="deleteHabit(${habit.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function generateCalendar(calendarData) {
            const today = new Date();
            let calendarHTML = '';
            
            // Generate last 30 days
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                
                const isCompleted = calendarData[i] || false;
                const isToday = i === 29; // Last element is today
                
                calendarHTML += `
                    <div class="calendar-day ${isCompleted ? 'active' : ''} ${isToday ? 'today' : ''}" 
                         data-day-index="${i}"
                         onclick="toggleDay(this, ${i})">
                        ${date.getDate()}
                    </div>
                `;
            }
            
            return calendarHTML;
        }
        
        function toggleDay(dayElement, dayIndex) {
            const habitId = dayElement.closest('.habit-card').dataset.habitId;
            const habits = JSON.parse(localStorage.getItem('habits') || '[]');
            const habitIndex = habits.findIndex(h => h.id == habitId);
            
            if (habitIndex !== -1) {
                // Toggle the day
                habits[habitIndex].calendar[dayIndex] = !habits[habitIndex].calendar[dayIndex];
                
                // Update streak
                updateStreak(habits[habitIndex]);
                
                // Save changes
                localStorage.setItem('habits', JSON.stringify(habits));
                
                // Update UI
                dayElement.classList.toggle('active');
                loadHabits();
                updateHabitStatistics();
            }
        }
        
        function updateStreak(habit) {
            let currentStreak = 0;
            
            // Calculate current streak (count consecutive true from the end)
            for (let i = habit.calendar.length - 1; i >= 0; i--) {
                if (habit.calendar[i]) {
                    currentStreak++;
                } else {
                    break;
                }
            }
            
            habit.streak = currentStreak;
            
            // Update best streak if needed
            if (currentStreak > (habit.bestStreak || 0)) {
                habit.bestStreak = currentStreak;
            }
        }
        
        function logHabit(habitId) {
            const habits = JSON.parse(localStorage.getItem('habits') || '[]');
            const habitIndex = habits.findIndex(h => h.id == habitId);
            
            if (habitIndex !== -1) {
                // Mark today as completed (last element in calendar array)
                const todayIndex = 29; // Last 30 days, today is index 29
                habits[habitIndex].calendar[todayIndex] = true;
                
                // Update streak
                updateStreak(habits[habitIndex]);
                
                // Update timestamp
                habits[habitIndex].updatedAt = new Date().toISOString();
                
                // Save changes
                localStorage.setItem('habits', JSON.stringify(habits));
                
                // Reload habits
                loadHabits();
                updateHabitStatistics();
                
                // Show success message
                alert('Habit logged for today!');
            }
        }
        
        function updateHabitStatistics() {
            const habits = JSON.parse(localStorage.getItem('habits') || '[]');
            const statsContainer = document.getElementById('habit-stats');
            
            if (habits.length === 0) {
                statsContainer.innerHTML = '<p class="empty-state">No habits to analyze</p>';
                return;
            }
            
            // Calculate statistics
            const totalHabits = habits.length;
            let totalStreak = 0;
            let bestStreak = 0;
            let completionRate = 0;
            
            habits.forEach(habit => {
                totalStreak += habit.streak || 0;
                if (habit.bestStreak > bestStreak) {
                    bestStreak = habit.bestStreak;
                }
                
                // Calculate completion rate for this habit
                const completedDays = habit.calendar.filter(Boolean).length;
                completionRate += (completedDays / 30) * 100;
            });
            
            const averageStreak = Math.round(totalStreak / totalHabits);
            const overallCompletionRate = Math.round(completionRate / totalHabits);
            
            statsContainer.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">${totalHabits}</div>
                        <div class="stat-label">Total Habits</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${averageStreak}</div>
                        <div class="stat-label">Avg Streak</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${bestStreak}</div>
                        <div class="stat-label">Best Streak</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${overallCompletionRate}%</div>
                        <div class="stat-label">Completion Rate</div>
                    </div>
                </div>
            `;
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize sample data if needed
            if (typeof SelfMasterData !== 'undefined') {
                SelfMasterData.initializeSampleData();
            }
            
            loadHabits();
            updateHabitStatistics();
            
            // Mobile menu
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const nav = document.querySelector('nav ul');
            
            if (mobileMenuBtn && nav) {
                mobileMenuBtn.addEventListener('click', function() {
                    nav.classList.toggle('show');
                    mobileMenuBtn.innerHTML = nav.classList.contains('show') 
                        ? '<i class="fas fa-times"></i>' 
                        : '<i class="fas fa-bars"></i>';
                });
            }
        });
    </script>
</body>
</html>